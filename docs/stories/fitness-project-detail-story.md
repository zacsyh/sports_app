# 健身项目详情查看功能用户故事

## 1. 用户角色

### 主要用户
- **健身爱好者**: 定期进行健身锻炼，希望跟踪和管理自己的健身进度
- **健身初学者**: 刚开始健身，需要简单易用的工具来建立健身习惯
- **自律性训练者**: 需要提醒和激励机制来保持锻炼的连续性

### 次要用户
- **健身教练**: 可能使用该应用来跟踪客户的训练计划
- **健康关注者**: 关注健康数据，希望通过数据了解自己的身体状况

## 2. 功能描述

作为一位健身用户，我希望能够查看健身项目的详细信息，以便了解项目的具体要求、当前进度和历史记录。应用基于Web平台（PWA），所有数据存储在本地浏览器中。

### 核心功能
1. 用户可以从主界面点击项目卡片进入项目详情界面
2. 界面根据项目类型（Sets×Reps 或 Total count/weight）显示相应的信息布局
3. 展示项目基本信息：
   - 项目名称
   - 项目描述
   - 项目类型标识
   - 创建时间
4. 展示项目目标信息：
   - Sets×Reps模式：显示组数和每组次数
   - Total count/weight模式：显示目标次数和目标重量
5. 展示进度可视化：
   - 环形进度条显示总体完成度
   - 文字说明当前进度
   - 最近5条历史记录列表
6. 提供操作按钮：
   - 开始按钮（用于开始跟踪）
   - 编辑按钮（跳转到编辑界面）
   - 删除按钮（删除项目）

## 3. 验收标准

### 功能验收标准
1. 用户可以从主界面成功进入项目详情界面
2. 界面能正确识别项目类型并显示相应布局
3. 项目基本信息能正确显示
4. 项目目标信息能正确显示
5. 进度可视化能正确显示当前进度
6. 历史记录列表能正确显示最近5条记录
7. 操作按钮功能正常：
   - 开始按钮能跳转到跟踪界面
   - 编辑按钮能跳转到编辑界面
   - 删除按钮能删除项目并返回主界面

### 性能验收标准
1. 项目详情界面加载时间不超过1秒
2. 进度计算和显示时间不超过200毫秒
3. 历史记录加载时间不超过500毫秒

### 兼容性验收标准
1. 在主流浏览器（Chrome、Firefox、Safari、Edge）上都能正常显示和操作
2. 在深色和浅色主题下都能正确显示界面元素
3. 在不同屏幕尺寸和分辨率下都能正常显示（响应式设计）

## 4. 技术要求

### 数据模型
根据系统架构设计，项目详情界面需要显示以下数据，数据存储在浏览器的IndexedDB中：

#### 项目基础信息
- `id`: String (唯一标识符)
- `name`: String (项目名称)
- `description`: String (项目描述)
- `type`: Enum (项目类型：SETS_REPS 或 TOTAL_COUNT)
- `createdAt`: Long (创建时间)
- `updatedAt`: Long (更新时间)
- `status`: Enum (状态：ACTIVE, COMPLETED, ARCHIVED)

#### Sets×Reps模式数据
- `sets`: Int (设定组数)
- `repsPerSet`: Int (每组次数)
- `completedSets`: List<Int> (已完成的组数记录)

#### Total count/weight模式数据
- `targetCount`: Int (目标次数)
- `targetWeight`: Double (目标重量)
- `currentCount`: Int (当前完成次数)
- `history`: List<ProgressRecord> (进度历史记录)

### 存储要求
1. 从浏览器IndexedDB中读取项目数据
2. 使用Dexie.js封装IndexedDB操作
3. 所有数据库操作应在Web Worker中执行，避免阻塞主线程
4. 数据库操作应通过数据存储模块统一处理
5. 支持PWA离线存储，确保应用在离线状态下仍可正常使用

### 架构要求
1. 项目详情功能应集成在健身项目管理模块中
2. 数据读取操作应通过数据存储模块统一处理
3. 使用Promise/async-await处理异步操作
4. 进度计算逻辑应封装在业务逻辑层

### 安全要求
1. 确保数据访问的安全性
2. 防止数据泄露
3. 遵循隐私保护原则
4. 所有数据存储在浏览器本地，不上传到任何服务器

## 5. 界面设计参考

### 界面布局
#### 顶部导航栏
- 左侧：返回按钮
- 中间：项目名称（如果名称过长则截断并显示省略号）
- 右侧：编辑图标按钮

#### 项目信息区域
1. **项目基本信息卡片**
   - 项目名称：标题1 (24sp)
   - 项目描述：正文 (16sp)
   - 项目类型标签：小标签样式
   - 创建时间：辅助文字 (14sp)

2. **项目目标信息卡片**
   - Sets×Reps模式：
     - 标题："目标"
     - 内容："4组 × 15次"
   - Total count/weight模式：
     - 标题："目标"
     - 内容："200次" 或 "10kg"

#### 进度可视化区域
1. **环形进度条**
   - 大小：120dp直径
   - 颜色：活力橙 (#FF6B35)
   - 背景：浅灰色 (#F5F5F5)
   - 中心文字：显示百分比和进度文字

2. **进度文字说明**
   - Sets×Reps模式："已完成2组/共4组"
   - Total count/weight模式："已完成150次/共200次"

#### 历史记录区域
- 标题："历史记录"
- 列表显示最近5条记录：
  - 时间：相对时间显示（如"2小时前"）
  - 内容：完成的具体信息
  - 状态标识

#### 底部操作按钮区域
- 左侧：删除按钮（文字按钮样式，红色）
- 右侧：
  - 编辑按钮（次要按钮样式）
  - 开始按钮（主要按钮样式）

### 视觉设计规范
#### 颜色规范
- 主色调：活力橙 (#FF6B35) - 用于主要操作按钮和进度条
- 主要文字颜色：深灰 (#333333)
- 次要文字颜色：中灰 (#999999)
- 背景色：浅灰 (#F5F5F5)
- 卡片背景色：白色 (#FFFFFF)
- 删除按钮颜色：错误红 (#F44336)

#### 字体规范
- 项目名称：24px
- 卡片标题：18px
- 正文：16px
- 辅助文字：14px
- 按钮文字：16px

#### 间距规范
- 卡片间距：16px
- 卡片内边距：16px
- 元素间距：8px
- 按钮内边距：水平16px，垂直12px

#### 组件样式
1. **卡片**
   - 背景色：#FFFFFF
   - 圆角：8px
   - 阴影：0 2px 4px rgba(0,0,0,0.1)
   - 内边距：16px

2. **环形进度条**
   - 线条宽度：8px
   - 背景色：#F5F5F5
   - 进度色：#FF6B35

3. **按钮**
   - 主要按钮：
     - 背景色：#FF6B35
     - 文字颜色：#FFFFFF
     - 圆角：8px
   - 次要按钮：
     - 背景色：#FFFFFF
     - 边框：1px #FF6B35
     - 文字颜色：#FF6B35
     - 圆角：8px
   - 文字按钮：
     - 背景色：透明
     - 文字颜色：#F44336
     - 内边距：8px 水平, 4px 垂直

### 交互设计
1. **页面跳转**
   - 从主界面进入详情界面：页面滑入动画
   - 返回主界面：页面滑出动画
   - 跳转到编辑界面：页面滑入动画

2. **按钮交互**
   - 按钮点击时有CSS过渡效果
   - 按钮按下时颜色加深10%
   - 禁用按钮时透明度为50%，无点击效果

3. **列表交互**
   - 历史记录列表项点击时有CSS过渡效果
   - 列表项之间有分割线区分

4. **空状态处理**
   - 当没有历史记录时显示："暂无历史记录"

### 响应式设计
1. **不同屏幕尺寸适配**
   - 小屏设备：环形进度条适当缩小
   - 大屏设备：保持合适的边距和比例
   - 横竖屏切换：支持自动适配
   - 支持桌面端和移动端显示

2. **深色主题适配**
   - 背景色：#121212
   - 卡片背景色：#1E1E1E
   - 文字颜色相应调整

3. **浏览器兼容性**
   - 支持主流浏览器的响应式设计
   - 在不同浏览器窗口尺寸下保持良好显示效果

### 错误处理
1. **数据加载错误**
   - 显示红色Toast提示
   - 提示文字："数据加载失败，请重试"
   - 提供"重试"按钮

2. **删除确认**
   - 点击删除按钮时弹出确认对话框
   - 确认对话框标题："确认删除"
   - 确认对话框内容："确定要删除此项目吗？此操作不可撤销。"
   - 确认按钮：红色"删除"
   - 取消按钮："取消"

3. **浏览器兼容性问题**
   - 检测浏览器对IndexedDB的支持情况
   - 如果不支持，提示用户升级浏览器
   - 对于部分功能不支持的浏览器，提供降级方案

### 成功反馈
1. **删除成功**
   - 显示绿色Toast提示："项目删除成功"
   - 自动返回主界面
   - 数据已从浏览器IndexedDB中删除
   - PWA安装提示可能显示，引导用户安装应用

通过以上详细的用户故事，开发团队可以清晰地理解健身项目详情查看功能的需求、设计和技术实现要求，从而高效地完成开发工作。